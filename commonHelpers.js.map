{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["\n\nfunction createLi(images) {\n    return Array.from(images).map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n     <li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                <img \n                    class=\"gallery-image\" \n                    src=\"${webformatURL}\" \n                    alt=\"${tags}\" \n                />\n            </a>\n             <ul class=\"info\">\n        <li class=\"info-likes\">\n        <p class = \"info-h2\">\n        Likes\n        </p>\n        <p class=\"info-p\">\n        ${likes}\n        </p>\n        \n        \n        </li>\n        <li class=\"info-Views\">\n        <p class = \"info-h2\">\n        Views\n        </p>\n        <p class=\"info-p\">\n          ${views}\n        </p>\n        </li>\n        <li class=\"info-comments\">\n        <p class = \"info-h2\">\n        Comments\n        </p>\n        <p class=\"info-p\">\n          ${comments}\n        </p>\n        </li>\n        <li class=\"info-downloads\">\n         <p class = \"info-h2\">\n        Downloads\n        </p>\n        <p class=\"info-p\">\n          ${downloads}\n        </p>\n       </li>\n        </ul>\n        </li>    \n    `).join(\"\");\n}\n\nexport { createLi };\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport axios from 'axios';\n\nlet er;\nlet images = []; \nlet curentPage = 1;\nlet totalPage;\n\nexport const inputValue = () => {\n    const input = document.querySelector('.text');\n    er = input.value.trim();\n    input.value = \"\";\n    return er;\n}\n\nexport async function fetchData(curentPage) {\n    const link = `https://pixabay.com/api/`;\n    const myApiKey = \"42659935-3ef7103821fe0025c24926046\";\n\n    try {\n        const response = await axios.get(link, {\n            params: {\n                key: myApiKey,\n                q: er,\n                per_page: 15,\n                orientation: 'horizontal',\n                safesearch: true,\n                page: curentPage\n            }\n        });\n\n        const data = response.data;\n\n        if (data.hits.length === 0) {\n            iziToast.show({\n                message: 'Sorry, there are no images matching your search query. Please try again ',\n                color: 'red',\n                position: \"topRight\"\n            });\n        } else {\n            images = data.hits; \n            totalPage = data.totalHits;\n        }\n\n        return data;\n    } catch (error) {\n        console.error('Error:', error);\n        throw error;\n    }\n}\n\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { createLi } from \"./js/render-functions\";\nimport { fetchData } from \"./js/pixabay-api\";\nimport { inputValue } from \"./js/pixabay-api\";\nfunction getCardHeight() {\n    const card = document.querySelector('.gallery-item');\n    const cardRect = card.getBoundingClientRect();\n    return cardRect.height;\n}\n\nconsole.log(inputValue)\nconst galleryUl = document.querySelector(\".gallery\");\nconst submit = document.querySelector(\".form\");\nconst loader = document.querySelector(\".loader\");\nconst BtMorePage = document.querySelector(\".load-more\");\n\nlet currentPage = 1;\nlet maxPages = Infinity;\nlet leght;\nlet cardHeight;\n\nsubmit.addEventListener(\"submit\", async function (event) {\n    event.preventDefault();\n    loader.classList.remove(\"is-hiden\");\n\n    galleryUl.innerHTML = \"\";\n\n    let er = inputValue();\n    leght = er;\n\n    if (er === '') {\n        iziToast.show({\n            message: 'Please, write your request ',\n            color: 'red',\n            position: \"topRight\"\n        });\n        loader.classList.add(\"is-hiden\");\n        return;\n    }\n\n    try {\n        const data = await fetchData(1);\n        currentPage = 1;\n        galleryUl.innerHTML = '';\n        galleryUl.insertAdjacentHTML(\"afterbegin\", createLi(data.hits));\n        const lightbox = new SimpleLightbox('.gallery a', {\n            captionsData: 'alt',\n            captionDelay: 250\n        });\n        lightbox.refresh();\n        maxPages = Math.ceil(data.totalHits / 15)\n        if (data.hits.length === 0) {\n            BtMorePage.classList.add(\"is-hiden\")\n        } else {\n            BtMorePage.classList.remove(\"is-hiden\")\n        }\n        function getCardHeight() {\n    const card = document.querySelector('.gallery-item');\n    const cardRect = card.getBoundingClientRect();\n    return cardRect.height;\n}\n\n       \n    } catch (error) {\n        console.error('Error:', error);\n        iziToast.show({\n            message: 'An error occurred while fetching data. Please try again.',\n            color: 'red',\n            position: \"topRight\"\n        });\n    } finally {\n        loader.classList.add(\"is-hiden\");\n    }\n});\n\nBtMorePage.addEventListener(\"click\", async event => {\n    if (currentPage >= maxPages) {\n        BtMorePage.style.display = \"none\";\n        iziToast.show({\n            message: 'No more images to load',\n            color: 'blue',\n            position: \"topRight\"\n        });\n        return;\n    }\n\n    loader.classList.remove(\"is-hiden\");\n    try {\n        currentPage++\n        const data = await fetchData(currentPage);\n        console.log(data)\n        galleryUl.insertAdjacentHTML(\"beforeend\", createLi(data.hits));\n        const lightbox = new SimpleLightbox('.gallery a', {\n            captionsData: 'alt',\n            captionDelay: 250\n        });\n        lightbox.refresh();\n        if (!cardHeight) {\n            cardHeight = getCardHeight(); \n        }\n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: 'smooth'\n        });\n    } catch (error) {\n        console.error('Error:', error);\n        iziToast.show({\n            message: 'An error occurred while fetching data. Please try again.',\n            color: 'red',\n            position: \"topRight\"\n        });\n\n    } finally {\n        loader.classList.add(\"is-hiden\");\n    }\n});\n"],"names":["createLi","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","er","totalPage","inputValue","input","fetchData","curentPage","link","myApiKey","data","axios","iziToast","error","getCardHeight","galleryUl","submit","loader","BtMorePage","currentPage","maxPages","cardHeight","event","SimpleLightbox"],"mappings":"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"}