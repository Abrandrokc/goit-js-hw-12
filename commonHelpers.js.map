{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["\n function createLi(images) {\n    return  Array.from(images).map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n     <li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                <img \n                    class=\"gallery-image\" \n                    src=\"${webformatURL}\" \n                    alt=\"${tags}\" \n                />\n            </a>\n             <ul class=\"info\">\n        <li class=\"info-likes\">\n        <p class = \"info-h2\">\n        Likes\n        </p>\n        <p class=\"info-p\">\n        ${likes}\n        </p>\n        \n        \n        </li>\n        <li class=\"info-Views\">\n        <p class = \"info-h2\">\n        Views\n        </p>\n        <p class=\"info-p\">\n          ${views}\n        </p>\n        </li>\n        <li class=\"info-comments\">\n        <p class = \"info-h2\">\n        Comments\n        </p>\n        <p class=\"info-p\">\n          ${comments}\n        </p>\n        </li>\n        <li class=\"info-downloads\">\n         <p class = \"info-h2\">\n        Downloads\n        </p>\n        <p class=\"info-p\">\n          ${downloads}\n        </p>\n       </li>\n        </ul>\n        </li>    \n    `).join(\"\");\n}\n\nexport { createLi }\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport axios from 'axios';\n\nlet images = []; \nlet currentPage = 1;\nlet totalPage;\nasync function fetchData(currentPage) {\n    const input = document.querySelector('.text');\n    const inputValue = input.value;\n    const link = `https://pixabay.com/api/`;\n    const myApiKey = \"42659935-3ef7103821fe0025c24926046\";\n\n    try {\n        const response = await axios.get(link, {\n            params: {\n                key: myApiKey,\n                q: inputValue,\n                per_page: 15,\n                orientation: 'horizontal',\n                safesearch: true,\n                page: currentPage\n            }\n        });\n\n        const data = response.data;\n\n        if (data.hits.length === 0) {\n            iziToast.show({\n                message: 'Sorry, there are no images matching your search query. Please try again ',\n                color: 'red',\n                position: \"topRight\"\n            });\n        } else {\n            images = data.hits; \n            totalPage = data.totalHits;\n           \n        }\n\n        return data;\n    } catch (error) {\n        console.error('Error:', error);\n        throw error;\n    }\n}\n\nexport { fetchData, images, totalPage, currentPage };\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { createLi } from \"./js/render-functions\";\nimport { fetchData } from \"./js/pixabay-api\";\n\nconst galleryUl = document.querySelector(\".gallery\");\nconst submit = document.querySelector(\".form\");\nconst loader = document.querySelector(\".loader\");\nconst BtMorePage = document.querySelector(\".load-more\");\n\nlet currentPage = 1;\nlet maxPages = Infinity;\nlet inputValue = '';\nlet cardHeight; \n\n\nfunction getCardHeight() {\n    const card = document.querySelector('.gallery a');\n    const cardRect = card.getBoundingClientRect();\n    return cardRect.height;\n}\n\nsubmit.addEventListener(\"submit\", async function (event) {\n    event.preventDefault();\n    loader.classList.remove(\"is-hiden\");\n\n    galleryUl.innerHTML = \"\";\n\n    const input = document.querySelector('.text');\n    inputValue = input.value.trim();\n    if (inputValue === '') {\n        iziToast.show({\n            message: 'Please, write your request ',\n            color: 'red',\n            position: \"topRight\"\n        });\n        loader.classList.add(\"is-hiden\");\n        return;\n    }\n\n    try {\n        const data = await fetchData(inputValue, 1);\n        currentPage = 1;\n        galleryUl.innerHTML = '';\n        galleryUl.insertAdjacentHTML(\"afterbegin\", createLi(data.hits));\n        const lightbox = new SimpleLightbox('.gallery a', {\n            captionsData: 'alt',\n            captionDelay: 250\n        });\n        lightbox.refresh();\n        maxPages = Math.ceil(data.totalHits / 15);\n    } catch (error) {\n        console.error('Error:', error);\n        iziToast.show({\n            message: 'An error occurred while fetching data. Please try again.',\n            color: 'red',\n            position: \"topRight\"\n        });\n    } finally {\n        loader.classList.add(\"is-hiden\");\n    }\n    BtMorePage.classList.remove(\"is-hiden\");\n});\n\nBtMorePage.addEventListener(\"click\", async event => {\n    if (currentPage >= maxPages) {\n        BtMorePage.style.display = \"none\";\n        iziToast.show({\n            message: 'No more images to load',\n            color: 'blue',\n            position: \"topRight\"\n        });\n        return;\n    }\n\n    loader.classList.remove(\"is-hiden\");\n    try {\n        currentPage++\n        const data = await fetchData(currentPage);\n        console.log(data)\n        galleryUl.insertAdjacentHTML(\"beforeend\", createLi(data.hits));\n        const lightbox = new SimpleLightbox('.gallery a', {\n            captionsData: 'alt',\n            captionDelay: 250\n        });\n        lightbox.refresh();\n        if (!cardHeight) {\n            cardHeight = getCardHeight(); \n        }\n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: 'smooth'\n        });\n    } catch (error) {\n        console.error('Error:', error);\n        iziToast.show({\n            message: 'An error occurred while fetching data. Please try again.',\n            color: 'red',\n            position: \"topRight\"\n        });\n\n    } finally {\n        loader.classList.add(\"is-hiden\");\n    }\n\n})\n"],"names":["createLi","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","totalPage","fetchData","currentPage","inputValue","link","myApiKey","data","axios","iziToast","error","galleryUl","submit","loader","BtMorePage","maxPages","cardHeight","getCardHeight","event","SimpleLightbox"],"mappings":"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"}